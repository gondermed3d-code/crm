<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barkod POS Sistemi</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            /* Theme colors - can be changed dynamically */
            --color-primary: #667eea;
            --color-primary-dark: #764ba2;
            --color-success: #48bb78;
            --color-danger: #f56565;
            --color-warning: #ffc107;

            /* Background colors */
            --bg-color: #f5f5f5;
            --card-bg: #ffffff;
            --text-color: #333333;
            --text-secondary: #666666;
            --border-color: #e0e0e0;
            --input-bg: #ffffff;
            --sidebar-bg: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            overflow: hidden;
            transition: background 0.3s, color 0.3s;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        #app {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark, #764ba2) 100%);
            color: white;
            padding: 15px 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-logo {
            width: 45px;
            height: 45px;
            background: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .header-title h1 {
            font-size: 22px;
            margin: 0;
            font-weight: 700;
            letter-spacing: -0.5px;
            color: white;
        }

        .header-title p {
            opacity: 0.9;
            font-size: 13px;
            margin: 2px 0 0 0;
            font-weight: 300;
            color: white;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-icon-btn {
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            font-size: 18px;
        }

        .header-icon-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        .header-icon-btn .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4757;
            color: white;
            border-radius: 10px;
            padding: 2px 6px;
            font-size: 10px;
            font-weight: bold;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.15);
            padding: 8px 15px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .user-profile:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--color-primary);
            font-size: 14px;
        }

        .user-info {
            display: flex;
            flex-direction: column;
        }

        .user-info span:first-child {
            font-size: 13px;
            font-weight: 600;
        }

        .user-info span:last-child {
            font-size: 11px;
            opacity: 0.8;
        }

        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .sidebar {
            width: 260px;
            background: linear-gradient(180deg, #ffffff 0%, #f7fafc 100%);
            border-right: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            box-shadow: 2px 0 12px rgba(0,0,0,0.05);
        }

        .nav-item {
            padding: 16px 20px;
            margin: 4px 10px;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 500;
            font-size: 15px;
            position: relative;
        }

        .nav-item span:first-child {
            font-size: 20px;
            width: 24px;
            text-align: center;
        }

        .nav-item {
            --nav-hover-color: rgba(102, 126, 234, 0.08);
        }

        .nav-item:hover {
            background: var(--nav-hover-color, rgba(102, 126, 234, 0.08));
            transform: translateX(4px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .nav-item.active {
            background: linear-gradient(135deg, var(--color-primary, #667eea) 0%, var(--color-primary-dark, #764ba2) 100%);
            color: white;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: -10px;
            width: 4px;
            height: 100%;
            background: white;
            border-radius: 0 4px 4px 0;
        }

        .content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .card:hover {
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
            transform: translateY(-2px);
        }

        .card h2 {
            margin-bottom: 20px;
            color: #1a202c;
            font-weight: 700;
            font-size: 20px;
            letter-spacing: -0.5px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            font-family: 'Inter', sans-serif;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark, #5568d3) 100%);
            color: white;
        }

        .btn-primary:hover {
            filter: brightness(1.1);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--color-success) 0%, #38a169 100%);
            color: white;
        }

        .btn-success:hover {
            filter: brightness(1.1);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--color-danger) 0%, #e53e3e 100%);
            color: white;
        }

        .btn-danger:hover {
            filter: brightness(1.1);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #718096 0%, #4a5568 100%);
            color: white;
        }

        .btn-secondary:hover {
            filter: brightness(1.1);
        }

        /* Tema Preset ButonlarÄ± */
        .theme-preset-btn {
            border: none !important;
        }

        .theme-preset-btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 24px rgba(0,0,0,0.2) !important;
        }

        .theme-preset-btn:active {
            transform: translateY(-2px) scale(1);
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            border-radius: 8px;
            overflow: hidden;
        }

        table th,
        table td {
            padding: 14px 16px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        table th {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            font-weight: 700;
            color: #2d3748;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid var(--color-primary, #667eea);
        }

        table tbody tr {
            transition: all 0.2s ease;
        }

        table tbody tr:hover {
            background: #f7fafc;
            transform: scale(1.002);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        table tbody tr:nth-child(even) {
            background: #fafafa;
        }

        table tbody tr:nth-child(even):hover {
            background: #f0f4f8;
        }

        .scanner-container {
            position: relative;
            width: 100%;
            max-width: 640px;
            height: 480px;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
        }

        #scanner-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .scanner-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            height: 60%;
            border: 2px solid #48bb78;
            border-radius: 8px;
            box-shadow: 0 0 0 9999px rgba(0,0,0,0.5);
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #e0e0e0;
        }

        .cart-total {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
            text-align: right;
            padding: 20px;
            background: #f7fafc;
            border-radius: 8px;
            margin-top: 20px;
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-in-stock {
            background: #c6f6d5;
            color: #22543d;
        }

        .status-low-stock {
            background: #feebc8;
            color: #7c2d12;
        }

        .status-out-of-stock {
            background: #fed7d7;
            color: #742a2a;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .stats-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .stats-card h3 {
            font-size: 32px;
            margin-bottom: 5px;
            color: white !important; /* SayÄ±lar her zaman beyaz */
        }

        .stats-card p {
            opacity: 0.9;
            color: white !important; /* AÃ§Ä±klamalar da beyaz */
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(4px);
            /* ÃNEMLÄ°: Arka planÄ± tamamen engelle */
            pointer-events: all;
            cursor: default;
        }

        .modal.active {
            display: flex;
            /* Modal aÃ§Ä±kken kesinlikle arka plan tÄ±klanamaz */
            pointer-events: all;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            z-index: 10000;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            animation: modalSlideIn 0.3s ease;
            /* Modal iÃ§eriÄi tÄ±klanabilir */
            pointer-events: all;
            cursor: auto;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .close-modal {
            float: right;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        .close-modal:hover {
            color: #333;
        }

        /* Settings Tabs */
        .settings-tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
        }

        .settings-tab:hover {
            color: #667eea;
            background: #f8f9fa;
        }

        .settings-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: #f8f9fa;
        }

        .settings-tab-content {
            animation: fadeIn 0.3s;
        }

        /* CRM Customer Tabs */
        .tab-btn {
            padding: 10px 20px;
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
        }

        .tab-btn:hover {
            color: #667eea;
            background: #f8f9fa;
        }

        .tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .customer-tab {
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 20px 30px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            z-index: 2000;
            min-width: 300px;
            animation: slideIn 0.3s ease-out;
            border-left: 5px solid #48bb78;
        }

        .notification.success {
            border-left-color: #48bb78;
        }

        .notification.error {
            border-left-color: #f56565;
        }

        .notification h3 {
            margin: 0 0 10px 0;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notification p {
            margin: 5px 0;
            color: #666;
        }

        .notification .close-notification {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 20px;
            color: #999;
        }

        .notification .close-notification:hover {
            color: #333;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }

        .notification.hiding {
            animation: slideOut 0.3s ease-out forwards;
        }

        .print-quantity {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
        }

        .print-quantity input {
            width: 80px;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="header">
            <div class="header-left">
                <div class="header-logo">
                    <img src="logo.png" alt="Logo" style="width: 100%; height: 100%; object-fit: contain; border-radius: 12px;">
                </div>
                <div class="header-title">
                    <h1>Barkod POS</h1>
                    <p>SatÄ±Å NoktasÄ± & Stok YÃ¶netimi</p>
                </div>
            </div>
            <div class="header-right">
                <div class="user-profile" onclick="showUserMenu()">
                    <div class="user-avatar">KA</div>
                    <div class="user-info">
                        <span>KullanÄ±cÄ±</span>
                        <span>YÃ¶netici</span>
                    </div>
                    <i class="fas fa-chevron-down" style="font-size: 12px; opacity: 0.7;"></i>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <div class="nav-item active" data-page="dashboard">
                    <span>ð</span> Ana Sayfa
                </div>
                <div class="nav-item" data-page="pos">
                    <span>ð</span> SatÄ±Å
                </div>
                <div class="nav-item" data-page="products">
                    <span>ð¦</span> ÃrÃ¼nler
                </div>
                <div class="nav-item" data-page="customers">
                    <span>ð¥</span> MÃ¼Återiler
                </div>
                <div class="nav-item" onclick="toggleCrmSubmenu(event)">
                    <span>ð¼</span> CRM <span style="float: right;">â¼</span>
                </div>
                <div id="crm-submenu" style="display: none; padding-left: 20px; background: rgba(0,0,0,0.1);">
                    <div class="nav-item" data-page="crm" data-view="list">
                        <span>ð</span> MÃ¼Återi Listesi
                    </div>
                    <div class="nav-item" data-page="crm" data-view="dashboard">
                        <span>ð</span> Dashboard
                    </div>
                    <div class="nav-item" data-page="crm" data-view="bulk-message">
                        <span>ð¤</span> Toplu Mesaj
                    </div>
                </div>
                <div class="nav-item" data-page="barcode-generator">
                    <span>ð·ï¸</span> Barkod OluÅtur
                </div>
                <div class="nav-item" data-page="scanner">
                    <span>ð·</span> Barkod Okut <span style="color: #ff4444; font-size: 0.65em; font-weight: bold;">BETA</span>
                </div>
                <div class="nav-item" data-page="sales">
                    <span>ð</span> SatÄ±Å GeÃ§miÅi
                </div>
                <div class="nav-item" data-page="stock">
                    <span>ð</span> Stok Takibi
                </div>
                <div class="nav-item" data-page="reports">
                    <span>ð</span> Raporlar
                </div>
                <div class="nav-item" data-page="settings">
                    <span>âï¸</span> Ayarlar
                </div>
            </div>

            <div class="content">
                <!-- Dashboard Page -->
                <div class="page active" id="dashboard-page">
                    <h1 style="margin-bottom: 20px;">Ana Sayfa</h1>

                    <div class="grid-2">
                        <div class="stats-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <h3 id="stats-total-products">0</h3>
                            <p>Toplam ÃrÃ¼n</p>
                        </div>
                        <div class="stats-card" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">
                            <h3 id="stats-total-sales">0</h3>
                            <p>Toplam SatÄ±Å</p>
                        </div>
                        <div class="stats-card" style="background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%);">
                            <h3 id="stats-low-stock">0</h3>
                            <p>DÃ¼ÅÃ¼k Stok UyarÄ±sÄ±</p>
                        </div>
                        <div class="stats-card" style="background: linear-gradient(135deg, #fc8181 0%, #f56565 100%);">
                            <h3 id="stats-revenue">0 âº</h3>
                            <p>Toplam Ciro</p>
                        </div>
                    </div>

                    <div class="card" style="margin-top: 20px;">
                        <h2>HÄ±zlÄ± Ä°Ålemler</h2>
                        <div class="action-buttons">
                            <button class="btn btn-primary" onclick="document.querySelector('[data-page=pos]').click()">Yeni SatÄ±Å</button>
                            <button class="btn btn-success" onclick="document.querySelector('[data-page=products]').click(); showAddProductModal();">ÃrÃ¼n Ekle</button>
                            <button class="btn btn-secondary" onclick="document.querySelector('[data-page=barcode-generator]').click()">Barkod OluÅtur</button>
                        </div>
                    </div>

                    <div class="card">
                        <h2>Son SatÄ±Ålar</h2>
                        <table id="dashboard-sales-table">
                            <thead>
                                <tr>
                                    <th>Tarih</th>
                                    <th>ÃrÃ¼n SayÄ±sÄ±</th>
                                    <th>Toplam</th>
                                    <th>Ãdeme</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <!-- POS Page -->
                <div class="page" id="pos-page">
                    <div class="grid-2">
                        <div>
                            <div class="card">
                                <h2>ð HÄ±zlÄ± ÃrÃ¼n Ara</h2>

                                <!-- Quick Search by Name -->
                                <div class="form-group">
                                    <label>ÃrÃ¼n AdÄ± ile Ara (CanlÄ± Arama)</label>
                                    <input type="text" id="quick-search-input" placeholder="Ãrn: Coca, Ãikolata, Ekmek..."
                                           oninput="quickSearchProducts()" autocomplete="off">
                                </div>

                                <!-- Search Results Dropdown -->
                                <div id="search-results" style="display: none; max-height: 300px; overflow-y: auto;
                                     background: white; border: 2px solid #667eea; border-radius: 5px; margin-bottom: 20px;
                                     pointer-events: none; position: relative; z-index: 10;">
                                </div>

                                <div style="border-top: 2px dashed #ddd; margin: 20px 0; padding-top: 20px;">
                                    <h3 style="margin-bottom: 10px;">Veya Barkod Okutun <span style="color: #ff4444; font-size: 0.7em;">(BETA)</span></h3>
                                    <div class="form-group">
                                        <input type="text" id="pos-barcode-input" placeholder="Barkod okutun veya girin">
                                    </div>
                                    <button class="btn btn-primary" onclick="searchProductByBarcode()">Barkod ile Ara</button>
                                </div>
                            </div>

                            <div class="card" id="pos-cart">
                                <h2>Sepet</h2>

                                <!-- MÃ¼Återi SeÃ§imi -->
                                <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; margin-bottom: 15px;">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <strong>MÃ¼Återi:</strong>
                                            <span id="selected-customer-name" style="color: #667eea; margin-left: 5px;">Misafir (SeÃ§ilmedi)</span>
                                        </div>
                                        <div>
                                            <button class="btn btn-primary btn-sm" onclick="showSelectCustomerModal()">
                                                ð¤ MÃ¼Återi SeÃ§
                                            </button>
                                            <button class="btn btn-secondary btn-sm" id="clear-customer-btn" onclick="clearSelectedCustomer()" style="display: none;">
                                                â
                                            </button>
                                        </div>
                                    </div>
                                    <small style="color: #666; font-size: 11px;">MÃ¼Återi seÃ§ilmezse "Misafir" satÄ±Å olarak kaydedilir</small>
                                </div>

                                <div id="cart-items"></div>
                                <div class="cart-total">
                                    Toplam: <span id="cart-total">0.00</span> âº
                                </div>
                                <div class="action-buttons" style="margin-top: 20px;">
                                    <button class="btn btn-success" onclick="completeSale()">SatÄ±ÅÄ± Tamamla</button>
                                    <button class="btn btn-danger" onclick="clearCart()">Sepeti Temizle</button>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div class="card">
                                <h2>Son Eklenen ÃrÃ¼n</h2>
                                <div id="last-product-info">
                                    <p style="color: #999;">HenÃ¼z Ã¼rÃ¼n eklenmedi</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Products Page -->
                <div class="page" id="products-page">
                    <div class="card">
                        <h2>ÃrÃ¼n YÃ¶netimi</h2>
                        <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 20px;">
                            <button class="btn btn-primary" onclick="showAddProductModal()">+ Yeni ÃrÃ¼n Ekle</button>
                            <button class="btn btn-success" onclick="exportProductsToExcel()" style="background: #28a745;">ð Excel Ä°ndir</button>
                            <button class="btn btn-danger" onclick="exportProductsToPDF()" style="background: #dc3545;">ð PDF Ä°ndir</button>
                        </div>
                        <div style="margin-top: 20px;">
                            <table id="products-table">
                                <thead>
                                    <tr>
                                        <th>Barkod</th>
                                        <th>ÃrÃ¼n AdÄ±</th>
                                        <th>Fiyat</th>
                                        <th>Stok</th>
                                        <th>Kategori</th>
                                        <th>KDV</th>
                                        <th>Ä°Ålemler</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Barcode Generator Page -->
                <div class="page" id="barcode-generator-page">
                    <div class="card">
                        <h2>Barkod OluÅtur</h2>
                        <p style="color: #666; margin-bottom: 20px;">ÃrÃ¼nleriniz iÃ§in barkod oluÅturun, yazdÄ±rÄ±n veya kaydedin.</p>

                        <div class="grid-2">
                            <div>
                                <div class="form-group">
                                    <label>ÃrÃ¼n SeÃ§in</label>
                                    <select id="barcode-product-select" onchange="selectProductForBarcode()">
                                        <option value="">ÃrÃ¼n seÃ§in...</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label>Barkod</label>
                                    <input type="text" id="barcode-input" placeholder="Barkod numarasÄ±" onkeyup="generateBarcodePreview()">
                                </div>

                                <div class="form-group">
                                    <label>ÃrÃ¼n AdÄ± (Barkod AltÄ±nda GÃ¶sterilecek)</label>
                                    <input type="text" id="barcode-text" placeholder="ÃrÃ¼n adÄ±" onkeyup="generateBarcodePreview()">
                                </div>

                                <div class="form-group">
                                    <label>Barkod FormatÄ±</label>
                                    <select id="barcode-format" onchange="generateBarcodePreview()">
                                        <option value="CODE128">CODE128 (Genel KullanÄ±m - Ãnerilen)</option>
                                        <option value="CODE39">CODE39 (Alfanumerik)</option>
                                    </select>
                                    <small style="color: #999;">Not: EAN13, EAN8 ve UPC iÃ§in geÃ§erli barkod numarasÄ± gerekir</small>
                                </div>

                                <div class="form-group">
                                    <label>YazdÄ±rÄ±lacak Adet</label>
                                    <input type="number" id="barcode-quantity" value="1" min="1" max="100">
                                </div>

                                <div class="action-buttons">
                                    <button class="btn btn-primary" onclick="generateBarcodePreview()">Ãnizleme OluÅtur</button>
                                    <button class="btn btn-success" onclick="downloadBarcode()">Ä°ndir (PNG)</button>
                                    <button class="btn btn-secondary" onclick="printBarcode()">YazdÄ±r</button>
                                </div>
                            </div>

                            <div>
                                <h3 style="margin-bottom: 15px;">Barkod Ãnizleme</h3>
                                <div style="background: white; padding: 20px; border: 2px dashed #ddd; border-radius: 8px; text-align: center; min-height: 200px; display: flex; align-items: center; justify-content: center;">
                                    <div id="barcode-preview">
                                        <p style="color: #999;">Barkod burada gÃ¶rÃ¼necek</p>
                                    </div>
                                </div>
                                <canvas id="barcode-canvas" style="display: none;"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h2>Toplu Barkod OluÅtur</h2>
                        <p style="color: #666; margin-bottom: 15px;">TÃ¼m Ã¼rÃ¼nler iÃ§in barkodlarÄ± toplu olarak oluÅturun ve yazdÄ±rÄ±n.</p>
                        <button class="btn btn-primary" onclick="generateAllBarcodes()">TÃ¼m ÃrÃ¼nler Ä°Ã§in Barkod OluÅtur</button>
                        <div id="bulk-barcode-preview" style="margin-top: 20px;"></div>
                    </div>
                </div>

                <!-- Scanner Page -->
                <div class="page" id="scanner-page">
                    <div class="card">
                        <h2>Kamera ile Barkod Okut</h2>
                        <div class="scanner-container">
                            <video id="scanner-video" autoplay playsinline></video>
                            <div class="scanner-overlay"></div>
                        </div>
                        <div style="margin-top: 20px;">
                            <button class="btn btn-primary" onclick="startCamera()">KamerayÄ± BaÅlat</button>
                            <button class="btn btn-danger" onclick="stopCamera()">KamerayÄ± Durdur</button>
                        </div>
                        <div id="scanner-result" style="margin-top: 20px;"></div>
                    </div>
                </div>

                <!-- Sales Page -->
                <div class="page" id="sales-page">
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2 style="margin: 0;">SatÄ±Å GeÃ§miÅi</h2>
                            <button class="btn btn-danger" onclick="clearSalesHistory()" style="padding: 10px 20px;">
                                ðï¸ SatÄ±Å GeÃ§miÅini Temizle
                            </button>
                        </div>
                        <table id="sales-table">
                            <thead>
                                <tr>
                                    <th>Tarih</th>
                                    <th>ÃrÃ¼n SayÄ±sÄ±</th>
                                    <th>Toplam</th>
                                    <th>Ãdeme</th>
                                    <th>Ä°Ålemler</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <!-- Stock Page -->
                <div class="page" id="stock-page">
                    <div class="card">
                        <h2>Stok Durumu</h2>
                        <table id="stock-table">
                            <thead>
                                <tr>
                                    <th>ÃrÃ¼n</th>
                                    <th>Barkod</th>
                                    <th>Mevcut Stok</th>
                                    <th>Durum</th>
                                    <th>Ä°Ålemler</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>

                <!-- Customers Page -->
                <div class="page" id="customers-page">
                    <div class="card">
                        <h2>MÃ¼Återi YÃ¶netimi</h2>
                        <button class="btn btn-primary" onclick="showAddCustomerModal()">+ Yeni MÃ¼Återi Ekle</button>
                        <div style="margin-top: 20px;">
                            <table id="customers-table">
                                <thead>
                                    <tr>
                                        <th>MÃ¼Återi AdÄ±</th>
                                        <th>Telefon</th>
                                        <th>Email</th>
                                        <th>Veresiye</th>
                                        <th>Puan</th>
                                        <th>Ä°Ålemler</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Reports Page -->
                <div class="page" id="reports-page">
                    <div class="card">
                        <h2>ð GeliÅmiÅ Raporlar</h2>

                        <!-- Date Range Filter -->
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 30px;">
                            <h3 style="margin-bottom: 15px;">ð Tarih AralÄ±ÄÄ± SeÃ§in</h3>
                            <div style="display: flex; gap: 15px; align-items: flex-end; flex-wrap: wrap;">
                                <div>
                                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">BaÅlangÄ±Ã§ Tarihi</label>
                                    <input type="date" id="report-start-date" style="padding: 10px; border: 2px solid #667eea; border-radius: 5px; font-size: 14px;">
                                </div>
                                <div>
                                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">BitiÅ Tarihi</label>
                                    <input type="date" id="report-end-date" style="padding: 10px; border: 2px solid #667eea; border-radius: 5px; font-size: 14px;">
                                </div>
                                <button onclick="applyReportDateFilter()" style="padding: 10px 25px; background: #667eea; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; font-size: 14px;">Filtrele</button>
                                <button onclick="resetReportDateFilter()" style="padding: 10px 25px; background: #6c757d; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; font-size: 14px;">SÄ±fÄ±rla</button>
                            </div>
                        </div>

                        <!-- Period Selector -->
                        <div style="display: flex; gap: 10px; margin-bottom: 30px; flex-wrap: wrap;">
                            <button class="period-btn active" onclick="setReportPeriod('daily')" data-period="daily" style="padding: 12px 25px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.2s;">GÃ¼nlÃ¼k</button>
                            <button class="period-btn" onclick="setReportPeriod('weekly')" data-period="weekly" style="padding: 12px 25px; background: #e0e7ff; color: #667eea; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.2s;">HaftalÄ±k</button>
                            <button class="period-btn" onclick="setReportPeriod('monthly')" data-period="monthly" style="padding: 12px 25px; background: #e0e7ff; color: #667eea; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.2s;">AylÄ±k</button>
                        </div>

                        <!-- Stats Cards -->
                        <div class="grid-2" style="margin-bottom: 30px;">
                            <div class="stats-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <h3 id="report-today-sales">0 âº</h3>
                                <p>BugÃ¼nkÃ¼ SatÄ±Ålar</p>
                            </div>
                            <div class="stats-card" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">
                                <h3 id="report-month-sales">0 âº</h3>
                                <p>Bu Ayki SatÄ±Ålar</p>
                            </div>
                            <div class="stats-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                <h3 id="report-total-sales">0 âº</h3>
                                <p>Toplam SatÄ±Ålar</p>
                            </div>
                            <div class="stats-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                <h3 id="report-average-sale">0 âº</h3>
                                <p>Ortalama SatÄ±Å</p>
                            </div>
                        </div>

                        <!-- Sales Chart -->
                        <div class="card" style="margin-bottom: 30px; padding: 25px;">
                            <h3 style="margin-bottom: 20px;">ð SatÄ±Å Trendi</h3>
                            <canvas id="sales-chart" style="max-height: 400px;"></canvas>
                        </div>

                        <!-- Top Products -->
                        <div class="card" style="margin-bottom: 30px;">
                            <h3>ð En Ãok Satan ÃrÃ¼nler</h3>
                            <table id="top-products-table">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>ÃrÃ¼n</th>
                                        <th>SatÄ±Å MiktarÄ±</th>
                                        <th>Toplam Ciro</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                        <!-- Category Breakdown Chart -->
                        <div class="grid-2">
                            <div class="card" style="padding: 25px;">
                                <h3 style="margin-bottom: 20px;">ð° SatÄ±Å DaÄÄ±lÄ±mÄ±</h3>
                                <canvas id="category-chart" style="max-height: 300px;"></canvas>
                            </div>
                            <div class="card" style="padding: 25px;">
                                <h3 style="margin-bottom: 20px;">ð° Gelir Ãzeti</h3>
                                <div style="padding: 20px;">
                                    <p style="margin: 15px 0; display: flex; justify-content: space-between; border-bottom: 1px solid #e0e0e0; padding-bottom: 10px;">
                                        <span style="font-weight: bold;">Toplam Ciro:</span>
                                        <span id="summary-total-revenue" style="color: #667eea; font-weight: bold;">0 âº</span>
                                    </p>
                                    <p style="margin: 15px 0; display: flex; justify-content: space-between; border-bottom: 1px solid #e0e0e0; padding-bottom: 10px;">
                                        <span style="font-weight: bold;">Toplam KDV:</span>
                                        <span id="summary-total-vat" style="color: #28a745; font-weight: bold;">0 âº</span>
                                    </p>
                                    <p style="margin: 15px 0; display: flex; justify-content: space-between; border-bottom: 1px solid #e0e0e0; padding-bottom: 10px;">
                                        <span style="font-weight: bold;">SatÄ±Å SayÄ±sÄ±:</span>
                                        <span id="summary-total-count" style="color: #ffc107; font-weight: bold;">0</span>
                                    </p>
                                    <p style="margin: 15px 0; display: flex; justify-content: space-between;">
                                        <span style="font-weight: bold;">Ortalama Sepet:</span>
                                        <span id="summary-avg-basket" style="color: #f5576c; font-weight: bold;">0 âº</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CRM Page -->
                <div class="page" id="crm-page">
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2>ð¼ CRM - MÃ¼Återi Ä°liÅkileri YÃ¶netimi</h2>
                            <div style="display: flex; gap: 10px;">
                                <button class="btn btn-primary" onclick="showCrmDashboard()">
                                    ð Dashboard
                                </button>
                                <button class="btn btn-success" onclick="showBulkMessageModal()">
                                    ð¤ Toplu Mesaj
                                </button>
                                <button class="btn btn-primary" onclick="showAddCustomerModal()">
                                    + Yeni MÃ¼Återi
                                </button>
                            </div>
                        </div>

                        <!-- CRM List View -->
                        <div id="crm-list-view">
                            <div style="margin-bottom: 15px;">
                                <input type="text" id="crm-search-input" placeholder="ð MÃ¼Återi ara..."
                                    style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                            </div>

                            <div style="overflow-x: auto;">
                                <table id="crm-customers-table">
                                    <thead>
                                        <tr>
                                            <th>MÃ¼Återi AdÄ±</th>
                                            <th>Telefon</th>
                                            <th>Email</th>
                                            <th>AlÄ±ÅveriÅ SayÄ±sÄ±</th>
                                            <th>Toplam Harcama</th>
                                            <th>Son AlÄ±ÅveriÅ</th>
                                            <th>Sadakat PuanÄ±</th>
                                            <th>Segment</th>
                                            <th>Ä°Ålemler</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Dinamik olarak doldurulacak -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- CRM Dashboard View (Hidden by default) -->
                        <div id="crm-dashboard-view" style="display: none;">
                            <button class="btn btn-secondary" onclick="showCrmList()" style="margin-bottom: 20px;">
                                â Listeye DÃ¶n
                            </button>

                            <div class="grid-2" style="margin-bottom: 20px;">
                                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                                    <h3>ð En Ãok Harcayan</h3>
                                    <div id="top-spenders-list"></div>
                                </div>
                                <div class="card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">
                                    <h3>â­ En SadÄ±k MÃ¼Återiler</h3>
                                    <div id="loyal-customers-list"></div>
                                </div>
                            </div>

                            <div class="grid-2" style="margin-bottom: 20px;">
                                <div class="card" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: white;">
                                    <h3>â ï¸ Risk AltÄ±ndaki MÃ¼Återiler</h3>
                                    <div id="risk-customers-list"></div>
                                </div>
                                <div class="card" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); color: white;">
                                    <h3>ð Yeni MÃ¼Återiler</h3>
                                    <div id="new-customers-list"></div>
                                </div>
                            </div>

                            <div class="card">
                                <h3>ð MÃ¼Återi Segmentasyon DaÄÄ±lÄ±mÄ±</h3>
                                <div id="segment-distribution"></div>
                            </div>
                        </div>

                        <!-- CRM Bulk Message View (Hidden by default) -->
                        <div id="crm-bulk-message-view" style="display: none;">
                            <button class="btn btn-secondary" onclick="showCrmList()" style="margin-bottom: 20px;">
                                â Listeye DÃ¶n
                            </button>

                            <div class="grid-2" style="gap: 20px;">
                                <!-- Left: Customer Selection -->
                                <div class="card">
                                    <h3>ð Kime GÃ¶nderilsin?</h3>
                                    <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 15px;">
                                        <label style="display: flex; align-items: center; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.2s;">
                                            <input type="radio" name="bulk-target" value="all" checked style="margin-right: 10px; width: 18px; height: 18px;">
                                            <div>
                                                <strong>TÃ¼m MÃ¼Återiler</strong>
                                                <div style="font-size: 12px; color: #666;" id="all-count">0 kiÅi</div>
                                            </div>
                                        </label>
                                        <label style="display: flex; align-items: center; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.2s;">
                                            <input type="radio" name="bulk-target" value="vip" style="margin-right: 10px; width: 18px; height: 18px;">
                                            <div>
                                                <strong>ð VIP MÃ¼Återiler</strong>
                                                <div style="font-size: 12px; color: #666;" id="vip-count">0 kiÅi</div>
                                            </div>
                                        </label>
                                        <label style="display: flex; align-items: center; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.2s;">
                                            <input type="radio" name="bulk-target" value="regular" style="margin-right: 10px; width: 18px; height: 18px;">
                                            <div>
                                                <strong>ð DÃ¼zenli MÃ¼Återiler</strong>
                                                <div style="font-size: 12px; color: #666;" id="regular-count">0 kiÅi</div>
                                            </div>
                                        </label>
                                        <label style="display: flex; align-items: center; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.2s;">
                                            <input type="radio" name="bulk-target" value="new" style="margin-right: 10px; width: 18px; height: 18px;">
                                            <div>
                                                <strong>ð Yeni MÃ¼Återiler</strong>
                                                <div style="font-size: 12px; color: #666;" id="new-count">0 kiÅi</div>
                                            </div>
                                        </label>
                                        <label style="display: flex; align-items: center; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.2s;">
                                            <input type="radio" name="bulk-target" value="risk" style="margin-right: 10px; width: 18px; height: 18px;">
                                            <div>
                                                <strong>â ï¸ Risk AltÄ±ndaki MÃ¼Återiler</strong>
                                                <div style="font-size: 12px; color: #666;" id="risk-count">0 kiÅi</div>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <!-- Right: Message Settings -->
                                <div class="card">
                                    <h3>âï¸ Mesaj AyarlarÄ±</h3>
                                    <form id="bulk-message-form" onsubmit="sendBulkMessages(event)" style="margin-top: 15px;">
                                        <div style="margin-bottom: 15px;">
                                            <label style="display: block; margin-bottom: 5px; font-weight: 500;">Mesaj Åablonu:</label>
                                            <select id="bulk-template-select" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                                <option value="">Åablon seÃ§in...</option>
                                            </select>
                                        </div>

                                        <div style="margin-bottom: 15px;">
                                            <label style="display: block; margin-bottom: 8px; font-weight: 500;">Mesaj Tipi:</label>
                                            <div style="display: flex; gap: 15px;">
                                                <label style="display: flex; align-items: center;">
                                                    <input type="checkbox" name="message-type" value="whatsapp" checked style="margin-right: 8px; width: 18px; height: 18px;">
                                                    ð± WhatsApp
                                                </label>
                                                <label style="display: flex; align-items: center;">
                                                    <input type="checkbox" name="message-type" value="email" style="margin-right: 8px; width: 18px; height: 18px;">
                                                    ð§ Email
                                                </label>
                                            </div>
                                        </div>

                                        <div style="margin-bottom: 20px;">
                                            <label style="display: block; margin-bottom: 5px; font-weight: 500;">Mesaj Ãnizleme:</label>
                                            <div id="bulk-message-preview" style="padding: 15px; background: #f8f9fa; border-radius: 5px; min-height: 100px; border-left: 4px solid #667eea; white-space: pre-wrap;">
                                                Åablon seÃ§ilmedi...
                                            </div>
                                        </div>

                                        <button type="submit" class="btn btn-success" style="width: 100%; padding: 12px; font-size: 16px;">
                                            ð¤ Mesaj GÃ¶nder
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <!-- Customer Detail View (Hidden by default) -->
                        <div id="crm-detail-view" style="display: none;">
                            <button class="btn btn-secondary" onclick="showCrmList()" style="margin-bottom: 20px;">
                                â Listeye DÃ¶n
                            </button>

                            <div class="grid-2">
                                <!-- Left: Customer Info -->
                                <div class="card">
                                    <h3>MÃ¼Återi Bilgileri</h3>
                                    <div id="customer-detail-info"></div>
                                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                                        <button class="btn btn-success" id="whatsapp-btn" onclick="openWhatsApp()">
                                            ð± WhatsApp
                                        </button>
                                        <button class="btn btn-primary" onclick="showSendEmailModal()">
                                            ð§ Email GÃ¶nder
                                        </button>
                                    </div>
                                </div>

                                <!-- Right: Tabs -->
                                <div class="card">
                                    <div style="display: flex; gap: 10px; border-bottom: 2px solid #ddd; margin-bottom: 15px;">
                                        <button class="tab-btn active" onclick="switchCustomerTab('overview')">Genel BakÄ±Å</button>
                                        <button class="tab-btn" onclick="switchCustomerTab('purchases')">AlÄ±ÅveriÅler</button>
                                        <button class="tab-btn" onclick="switchCustomerTab('notes')">Notlar</button>
                                        <button class="tab-btn" onclick="switchCustomerTab('reminders')">HatÄ±rlatÄ±cÄ±lar</button>
                                        <button class="tab-btn" onclick="switchCustomerTab('messages')">Mesajlar</button>
                                    </div>

                                    <div id="tab-overview" class="customer-tab active">
                                        <div id="customer-overview-stats"></div>
                                    </div>

                                    <div id="tab-purchases" class="customer-tab" style="display: none;">
                                        <div id="customer-purchases-list"></div>
                                    </div>

                                    <div id="tab-notes" class="customer-tab" style="display: none;">
                                        <button class="btn btn-primary btn-sm" onclick="showAddNoteModal()" style="margin-bottom: 10px;">
                                            + Yeni Not
                                        </button>
                                        <div id="customer-notes-list"></div>
                                    </div>

                                    <div id="tab-reminders" class="customer-tab" style="display: none;">
                                        <button class="btn btn-primary btn-sm" onclick="showAddReminderModal()" style="margin-bottom: 10px;">
                                            + Yeni HatÄ±rlatÄ±cÄ±
                                        </button>
                                        <div id="customer-reminders-list"></div>
                                    </div>

                                    <div id="tab-messages" class="customer-tab" style="display: none;">
                                        <div id="customer-messages-list"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Page with Tabs -->
                <div class="page" id="settings-page">
                    <div class="card">
                        <h2>âï¸ Ayarlar</h2>

                        <!-- Tabs -->
                        <div style="display: flex; gap: 10px; border-bottom: 2px solid #ddd; margin-bottom: 20px; flex-wrap: wrap;">
                            <button class="settings-tab active" onclick="switchSettingsTab('general')">ðª Genel</button>
                            <button class="settings-tab" onclick="switchSettingsTab('vat')">ð KDV OranlarÄ±</button>
                            <button class="settings-tab" onclick="switchSettingsTab('shortcuts')">â¨ï¸ KÄ±sayollar</button>
                            <button class="settings-tab" onclick="switchSettingsTab('receipt')">ð§¾ FiÅ</button>
                            <button class="settings-tab" onclick="switchSettingsTab('theme')">ð¨ Tema & Renkler</button>
                            <button class="settings-tab" onclick="switchSettingsTab('smtp')">ð§ SMTP (Email)</button>
                            <button class="settings-tab" onclick="switchSettingsTab('templates')">ð Mesaj ÅablonlarÄ±</button>
                            <button class="settings-tab" onclick="switchSettingsTab('automation')">ð¤ Otomasyon</button>
                            <button class="settings-tab" onclick="switchSettingsTab('backup')">ð¾ Yedekleme</button>
                        </div>

                        <form id="settings-form" onsubmit="saveSettings(event)">
                            <!-- General Tab -->
                            <div id="settings-general-tab" class="settings-tab-content active">
                                <h3>MaÄaza Bilgileri</h3>
                                <div class="form-group">
                                    <label>MaÄaza AdÄ±</label>
                                    <input type="text" id="settings-store-name" required>
                                </div>
                                <div class="form-group">
                                    <label>Adres</label>
                                    <textarea id="settings-store-address" rows="3"></textarea>
                                </div>
                                <div class="form-group">
                                    <label>Telefon</label>
                                    <input type="tel" id="settings-store-phone">
                                </div>
                                <div class="form-group">
                                    <label>Vergi No</label>
                                    <input type="text" id="settings-tax-number">
                                </div>

                                <h3 style="margin-top: 30px;">Stok AyarlarÄ±</h3>
                                <div class="form-group">
                                    <label>DÃ¼ÅÃ¼k Stok UyarÄ± Seviyesi</label>
                                    <input type="number" id="settings-low-stock" min="1" value="10">
                                </div>

                                <h3 style="margin-top: 30px;">Para Birimi AyarlarÄ±</h3>
                                <div class="form-group">
                                    <label>Para Birimi</label>
                                    <select id="settings-currency">
                                        <option value="TRY">TÃ¼rk LirasÄ± (âº)</option>
                                        <option value="USD">ABD DolarÄ± ($)</option>
                                        <option value="EUR">Euro (â¬)</option>
                                        <option value="GBP">Ä°ngiliz Sterlini (Â£)</option>
                                        <option value="JPY">Japon Yeni (Â¥)</option>
                                    </select>
                                    <small style="color: #666;">Para birimi sembolÃ¼ otomatik olarak gÃ¼ncellenecektir.</small>
                                </div>

                                <div class="form-group">
                                    <label>SayÄ± FormatÄ±</label>
                                    <select id="settings-number-format">
                                        <option value="tr">TÃ¼rkiye FormatÄ± (1.234,56)</option>
                                        <option value="us">Amerika/Ä°ngiltere FormatÄ± (1,234.56)</option>
                                        <option value="eu">Avrupa FormatÄ± (1.234,56)</option>
                                        <option value="in">Hindistan FormatÄ± (1,23,456.78)</option>
                                        <option value="ch">Ä°sviÃ§re FormatÄ± (1'234.56)</option>
                                    </select>
                                    <small style="color: #666;">Binlik ve ondalÄ±k ayÄ±rÄ±cÄ± formatÄ±nÄ± seÃ§in.</small>
                                </div>
                            </div>

                            <!-- VAT Tab -->
                            <div id="settings-vat-tab" class="settings-tab-content" style="display: none;">
                                <h3>KDV OranlarÄ±nÄ± ÃzelleÅtir</h3>
                                <p style="color: #666; margin-bottom: 20px;">ÃrÃ¼nlerinize uygulayabildiÄiniz KDV oranlarÄ±nÄ± buradan dÃ¼zenleyebilirsiniz.</p>

                                <div id="vat-rates-list">
                                    <div class="form-group">
                                        <label>KDV Oran 1 - AÃ§Ä±klama</label>
                                        <input type="text" id="vat-name-1" placeholder="Ãrn: Ä°stisna, Muaf, vb." value="Ä°stisna">
                                        <label style="margin-top: 10px;">KDV Oran 1 (%)</label>
                                        <input type="text" inputmode="numeric" id="vat-rate-1" value="0" min="0" max="100"
                                               pattern="[0-9]+" placeholder="0"
                                               oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                               style="background: #ffffcc;">
                                        <small style="color: #666;">VarsayÄ±lan: %0 (Ä°stisna)</small>
                                    </div>
                                    <div class="form-group">
                                        <label>KDV Oran 2 - AÃ§Ä±klama</label>
                                        <input type="text" id="vat-name-2" placeholder="Ãrn: Temel GÄ±da, Kitap, vb." value="Temel GÄ±da">
                                        <label style="margin-top: 10px;">KDV Oran 2 (%)</label>
                                        <input type="text" inputmode="numeric" id="vat-rate-2" value="1" min="0" max="100"
                                               pattern="[0-9]+" placeholder="1"
                                               oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                               style="background: #ffffcc;">
                                        <small style="color: #666;">VarsayÄ±lan: %1 (Temel GÄ±da)</small>
                                    </div>
                                    <div class="form-group">
                                        <label>KDV Oran 3 - AÃ§Ä±klama</label>
                                        <input type="text" id="vat-name-3" placeholder="Ãrn: Ä°ndirimli, Konut, vb." value="Ä°ndirimli">
                                        <label style="margin-top: 10px;">KDV Oran 3 (%)</label>
                                        <input type="text" inputmode="numeric" id="vat-rate-3" value="10" min="0" max="100"
                                               pattern="[0-9]+" placeholder="10"
                                               oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                               style="background: #ffffcc;">
                                        <small style="color: #666;">VarsayÄ±lan: %10 (Ä°ndirimli)</small>
                                    </div>
                                    <div class="form-group">
                                        <label>KDV Oran 4 - AÃ§Ä±klama</label>
                                        <input type="text" id="vat-name-4" placeholder="Ãrn: Genel, Standart, vb." value="Genel">
                                        <label style="margin-top: 10px;">KDV Oran 4 (%)</label>
                                        <input type="text" inputmode="numeric" id="vat-rate-4" value="20" min="0" max="100"
                                               pattern="[0-9]+" placeholder="20"
                                               oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                                               style="background: #ffffcc;">
                                        <small style="color: #666;">VarsayÄ±lan: %20 (Genel)</small>
                                    </div>
                                </div>

                                <button type="button" class="btn btn-secondary" onclick="resetVatRatesToDefault()">VarsayÄ±lana SÄ±fÄ±rla</button>

                                <div style="background: #fff3cd; padding: 15px; border-radius: 5px; border-left: 4px solid #ffc107; margin-top: 20px;">
                                    <p style="margin: 0; font-size: 14px;">
                                        <strong>â ï¸ UyarÄ±:</strong> KDV oranlarÄ±nÄ± deÄiÅtirdiÄinizde, Ã¼rÃ¼n eklerken bu yeni oranlar seÃ§eneklerde gÃ¶rÃ¼necektir.<br>
                                        TÃ¼rkiye'de yasal KDV oranlarÄ±: %0, %1, %10, %20
                                    </p>
                                </div>
                            </div>

                            <!-- Keyboard Shortcuts Tab -->
                            <div id="settings-shortcuts-tab" class="settings-tab-content" style="display: none;">
                                <h3>Klavye KÄ±sayollarÄ±nÄ± ÃzelleÅtir</h3>
                                <p style="color: #666; margin-bottom: 20px;">KÄ±sayol tuÅlarÄ±nÄ± deÄiÅtirmek iÃ§in kutucuÄa tÄ±klayÄ±n ve yeni tuÅa basÄ±n.</p>

                                <div class="form-group">
                                    <label>SatÄ±Å SayfasÄ±na Git</label>
                                    <input type="text" id="shortcut-go-to-sales" value="F1" readonly onclick="captureShortcut(this)" style="cursor: pointer; background: #ffffcc;">
                                    <small style="color: #666;">VarsayÄ±lan: F1</small>
                                </div>

                                <div class="form-group">
                                    <label>Yeni ÃrÃ¼n Ekle</label>
                                    <input type="text" id="shortcut-add-product" value="F2" readonly onclick="captureShortcut(this)" style="cursor: pointer; background: #ffffcc;">
                                    <small style="color: #666;">VarsayÄ±lan: F2</small>
                                </div>

                                <div class="form-group">
                                    <label>Yeni MÃ¼Återi Ekle</label>
                                    <input type="text" id="shortcut-add-customer" value="F3" readonly onclick="captureShortcut(this)" style="cursor: pointer; background: #ffffcc;">
                                    <small style="color: #666;">VarsayÄ±lan: F3</small>
                                </div>

                                <div class="form-group">
                                    <label>SatÄ±ÅÄ± Tamamla</label>
                                    <input type="text" id="shortcut-complete-sale" value="F4" readonly onclick="captureShortcut(this)" style="cursor: pointer; background: #ffffcc;">
                                    <small style="color: #666;">VarsayÄ±lan: F4</small>
                                </div>

                                <div class="form-group">
                                    <label>Dashboard'u Yenile</label>
                                    <input type="text" id="shortcut-refresh" value="F5" readonly onclick="captureShortcut(this)" style="cursor: pointer; background: #ffffcc;">
                                    <small style="color: #666;">VarsayÄ±lan: F5</small>
                                </div>

                                <button type="button" class="btn btn-secondary" onclick="resetShortcutsToDefault()">VarsayÄ±lana SÄ±fÄ±rla</button>
                            </div>

                            <!-- Receipt Tab -->
                            <div id="settings-receipt-tab" class="settings-tab-content" style="display: none;">
                                <h3>FiÅ/Fatura AyarlarÄ±</h3>
                                <div class="form-group">
                                    <label>FiÅ Alt Bilgi MesajÄ±</label>
                                    <textarea id="settings-receipt-footer" rows="3" placeholder="Ãrn: Bizi tercih ettiÄiniz iÃ§in teÅekkÃ¼rler!"></textarea>
                                    <small style="color: #666;">FiÅ ve faturanÄ±n en altÄ±nda gÃ¶rÃ¼necek mesaj</small>
                                </div>

                                <div style="background: #e7f3ff; padding: 15px; border-radius: 5px; border-left: 4px solid #2196f3; margin-top: 20px;">
                                    <p style="margin: 0; font-size: 14px;">
                                        <strong>ð§¾ FiÅ Ãnizleme:</strong> SatÄ±Å tamamlandÄ±ÄÄ±nda otomatik aÃ§Ä±lÄ±r.<br>
                                        Termal yazÄ±cÄ± (58mm/80mm) ve A4 formatlarÄ±nÄ± destekler.
                                    </p>
                                </div>
                            </div>

                            <!-- Theme & Colors Tab -->

                            <!-- SMTP Settings Tab -->
                            <div id="settings-smtp-tab" class="settings-tab-content" style="display: none;">
                                <h3>ð§ SMTP AyarlarÄ± (Email GÃ¶nderimi)</h3>
                                <p style="color: #666; margin-bottom: 20px;">Email gÃ¶nderimi iÃ§in SMTP ayarlarÄ±nÄ± yapÄ±landÄ±rÄ±n. Gmail, Outlook veya kendi mail sunucunuzu kullanabilirsiniz.</p>

                                <div class="form-group">
                                    <label>SMTP Sunucu</label>
                                    <input type="text" id="settings-smtp-host" placeholder="Ã¶rn: smtp.gmail.com">
                                    <small style="color: #666;">Gmail: smtp.gmail.com, Outlook: smtp.office365.com</small>
                                </div>

                                <div class="form-group">
                                    <label>Port</label>
                                    <input type="number" id="settings-smtp-port" placeholder="587">
                                    <small style="color: #666;">Genellikle 587 (TLS) veya 465 (SSL)</small>
                                </div>

                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="settings-smtp-secure">
                                        SSL Kullan (Port 465 iÃ§in)
                                    </label>
                                </div>

                                <div class="form-group">
                                    <label>Email Adresi</label>
                                    <input type="email" id="settings-smtp-user" placeholder="ornek@gmail.com">
                                </div>

                                <div class="form-group">
                                    <label>Åifre / Uygulama Åifresi</label>
                                    <input type="password" id="settings-smtp-pass" placeholder="â¢â¢â¢â¢â¢â¢â¢â¢">
                                    <small style="color: #666;">Gmail iÃ§in: Uygulama Åifresi oluÅturmanÄ±z gerekebilir</small>
                                </div>

                                <div class="form-group">
                                    <label>GÃ¶nderici AdÄ±</label>
                                    <input type="text" id="settings-smtp-from" placeholder="MaÄaza AdÄ±">
                                </div>

                                <button type="button" class="btn btn-primary" onclick="testSmtpConnection()">
                                    ð§ª BaÄlantÄ±yÄ± Test Et
                                </button>
                            </div>

                            <!-- Message Templates Tab -->
                            <div id="settings-templates-tab" class="settings-tab-content" style="display: none;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                    <h3>ð Mesaj ÅablonlarÄ±</h3>
                                    <button type="button" class="btn btn-primary" onclick="showAddTemplateModal()">
                                        + Yeni Åablon
                                    </button>
                                </div>

                                <p style="color: #666; margin-bottom: 20px;">
                                    Mesaj ÅablonlarÄ±nÄ±zÄ± yÃ¶netin. DeÄiÅkenler: {musteri_adi}, {telefon}, {email}, {toplam_harcama}, {son_alisveris}, {puan}, {indirim_kodu}, {magaza_adi}, {tarih}
                                </p>

                                <div id="message-templates-list">
                                    <!-- Åablonlar dinamik olarak yÃ¼klenecek -->
                                </div>
                            </div>

                            <!-- Automation Tab -->
                            <div id="settings-automation-tab" class="settings-tab-content" style="display: none;">
                                <h3>ð¤ Otomatik Mesaj GÃ¶nderimi</h3>
                                <p style="color: #666; margin-bottom: 30px;">Belirli durumlarda otomatik olarak mesaj gÃ¶nderin.</p>

                                <div class="card" style="margin-bottom: 20px; background: #f8f9fa;">
                                    <h4>ð DoÄum GÃ¼nÃ¼ MesajlarÄ±</h4>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" id="auto-birthday-enabled">
                                            DoÄum gÃ¼nÃ¼ mesajÄ± gÃ¶nder
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>Mesaj Åablonu</label>
                                        <select id="auto-birthday-template">
                                            <option value="">Åablon seÃ§in...</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>GÃ¶nderim Saati</label>
                                        <input type="time" id="auto-birthday-time" value="09:00">
                                    </div>
                                </div>

                                <div class="card" style="margin-bottom: 20px; background: #f8f9fa;">
                                    <h4>â ï¸ Uzun SÃ¼redir Gelmeyenlere HatÄ±rlatma</h4>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" id="auto-inactive-enabled">
                                            30 gÃ¼n alÄ±ÅveriÅ yapmayanlara hatÄ±rlatma gÃ¶nder
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>Mesaj Åablonu</label>
                                        <select id="auto-inactive-template">
                                            <option value="">Åablon seÃ§in...</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="card" style="margin-bottom: 20px; background: #f8f9fa;">
                                    <h4>ð Yeni MÃ¼Återiye HoÅ Geldin MesajÄ±</h4>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" id="auto-welcome-enabled">
                                            Yeni mÃ¼Återilere hoÅ geldin mesajÄ± gÃ¶nder
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>Mesaj Åablonu</label>
                                        <select id="auto-welcome-template">
                                            <option value="">Åablon seÃ§in...</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>GÃ¶nderim ZamanÄ±</label>
                                        <select id="auto-welcome-delay">
                                            <option value="0">Hemen gÃ¶nder</option>
                                            <option value="60">1 saat sonra</option>
                                            <option value="1440">1 gÃ¼n sonra</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="card" style="margin-bottom: 20px; background: #f8f9fa;">
                                    <h4>ð AlÄ±ÅveriÅ SonrasÄ± TeÅekkÃ¼r MesajÄ±</h4>
                                    <div class="form-group">
                                        <label>
                                            <input type="checkbox" id="auto-thankyou-enabled">
                                            Her alÄ±ÅveriÅten sonra teÅekkÃ¼r mesajÄ± gÃ¶nder
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label>Mesaj Åablonu</label>
                                        <select id="auto-thankyou-template">
                                            <option value="">Åablon seÃ§in...</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>GÃ¶nderim ZamanÄ±</label>
                                        <select id="auto-thankyou-delay">
                                            <option value="0">Hemen gÃ¶nder</option>
                                            <option value="60">1 saat sonra</option>
                                        </select>
                                    </div>
                                </div>

                                <button type="button" class="btn btn-primary" onclick="saveAutomationSettings()">
                                    ð¾ Otomasyon AyarlarÄ±nÄ± Kaydet
                                </button>
                            </div>

                            <!-- Backup Tab -->
                            <div id="settings-backup-tab" class="settings-tab-content" style="display: none;">
                                <h3>ð¾ Yedekleme ve Geri YÃ¼kleme</h3>
                                <p style="color: #666; margin-bottom: 30px;">Verilerinizi yedekleyin ve gerektiÄinde geri yÃ¼kleyin. Yedekler otomatik olarak ZIP formatÄ±nda kaydedilir.</p>

                                <!-- Yedek OluÅtur -->
                                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px; border-radius: 15px; margin-bottom: 30px; color: white;">
                                    <h4 style="margin: 0 0 15px 0; color: white;">ð¦ Yeni Yedek OluÅtur</h4>
                                    <p style="margin-bottom: 20px; opacity: 0.9;">TÃ¼m Ã¼rÃ¼nler, satÄ±Ålar, mÃ¼Återiler ve ayarlarÄ±nÄ±z yedeklenir.</p>
                                    <button type="button" id="create-backup-btn" onclick="createBackup()" class="btn btn-success" style="background: white; color: #667eea; font-weight: bold; padding: 12px 30px;">
                                        ð¾ Yedek OluÅtur
                                    </button>
                                    <div id="backup-status" style="margin-top: 15px;"></div>
                                </div>

                                <!-- Yedek Listesi -->
                                <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin-bottom: 30px;">
                                    <h4 style="margin: 0 0 15px 0;">ð Mevcut Yedekler</h4>
                                    <p style="color: #666; margin-bottom: 15px;">Son 10 yedek otomatik olarak saklanÄ±r.</p>
                                    <div id="backup-list">
                                        <p style="color: #999;">YÃ¼kleniyor...</p>
                                    </div>
                                </div>

                                <!-- Harici Yedek YÃ¼kle -->
                                <div style="background: #fff3cd; padding: 25px; border-radius: 15px; border: 2px solid #ffc107;">
                                    <h4 style="margin: 0 0 15px 0;">ð Harici Yedek DosyasÄ±nÄ± YÃ¼kle</h4>
                                    <p style="color: #856404; margin-bottom: 20px;">BilgisayarÄ±nÄ±zdan bir yedek dosyasÄ± (.zip) seÃ§ip geri yÃ¼kleyin.</p>
                                    <button type="button" onclick="selectAndRestoreBackup()" class="btn btn-primary" style="padding: 12px 30px; font-weight: bold;">
                                        ð Dosya SeÃ§ ve Geri YÃ¼kle
                                    </button>
                                </div>

                                <!-- UyarÄ± -->
                                <div style="background: #fff5f5; padding: 20px; border-radius: 10px; border-left: 4px solid #f56565; margin-top: 30px;">
                                    <strong style="color: #c53030;">â ï¸ Ãnemli UyarÄ±:</strong>
                                    <p style="color: #742a2a; margin: 10px 0 0 0;">Yedek geri yÃ¼klendiÄinde, mevcut tÃ¼m veriler yedeÄin iÃ§eriÄiyle deÄiÅtirilecektir. Bu iÅlem geri alÄ±namaz!</p>
                                </div>
                                <!-- Database Reset - Danger Zone -->
                                <div style="background: #ffe5e5; padding: 25px; border-radius: 15px; border: 2px solid #ff4444; margin-top: 30px;">
                                    <h4 style="margin: 0 0 15px 0; color: #d00;">ð´ Tehlikeli BÃ¶lge</h4>
                                    <p style="color: #a00; margin-bottom: 20px; font-weight: 500;">TÃ¼m veritabanÄ±nÄ± sÄ±fÄ±rla - Bu iÅlem GERÄ° ALINAMAZ!</p>
                                    <button type="button" onclick="resetDatabase()" class="btn btn-danger" style="padding: 12px 30px; font-weight: bold; background: #d00;">
                                        ðï¸ TÃ¼m Verileri SÄ±fÄ±rla
                                    </button>
                                    <p style="color: #a00; margin-top: 15px; font-size: 12px;">Bu iÅlem tÃ¼m Ã¼rÃ¼nleri, satÄ±ÅlarÄ±, mÃ¼Återileri ve kampanyalarÄ± kalÄ±cÄ± olarak siler!</p>
                                </div>
                            </div>

                            <div id="settings-theme-tab" class="settings-tab-content" style="display: none;">
                                <h3>ð¨ Tema & Renk AyarlarÄ±</h3>

                                <!-- Dark/Light Mode Toggle -->
                                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px; border-radius: 15px; margin-bottom: 30px; color: white;">
                                    <h4 style="margin: 0 0 20px 0; color: white;">ð Tema Modu</h4>
                                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                                        <button type="button" onclick="setThemeMode('light')" id="theme-light-btn" class="theme-mode-btn" style="flex: 1; min-width: 150px; padding: 20px; background: white; border: 3px solid #667eea; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
                                            <div style="font-size: 40px; margin-bottom: 10px;">âï¸</div>
                                            <div style="font-weight: bold; font-size: 16px; color: #667eea;">LIGHT MODE</div>
                                            <div style="font-size: 12px; color: #666; margin-top: 5px;">AydÄ±nlÄ±k Tema</div>
                                        </button>
                                        <button type="button" onclick="setThemeMode('dark')" id="theme-dark-btn" class="theme-mode-btn" style="flex: 1; min-width: 150px; padding: 20px; background: #1a1a1a; border: 3px solid transparent; border-radius: 12px; cursor: pointer; transition: all 0.3s;">
                                            <div style="font-size: 40px; margin-bottom: 10px;">ð</div>
                                            <div style="font-weight: bold; font-size: 16px; color: white;">DARK MODE</div>
                                            <div style="font-size: 12px; color: #999; margin-top: 5px;">KaranlÄ±k Tema</div>
                                        </button>
                                    </div>
                                </div>

                                <!-- Color Palette Customization -->
                                <div style="background: #f8f9fa; padding: 25px; border-radius: 15px;">
                                    <h4 style="margin: 0 0 20px 0;">ð¨ Renk Paleti ÃzelleÅtirme</h4>

                                    <div class="grid-2" style="gap: 20px;">
                                        <!-- Primary Color -->
                                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                            <label style="display: block; font-weight: bold; margin-bottom: 15px;">Ana Renk (Primary)</label>
                                            <div style="display: flex; align-items: center; gap: 15px;">
                                                <input type="color" id="color-primary" value="#667eea" style="width: 80px; height: 80px; border: none; border-radius: 10px; cursor: pointer;">
                                                <div>
                                                    <input type="text" id="color-primary-hex" value="#667eea" readonly style="padding: 10px; border: 2px solid #ddd; border-radius: 5px; font-family: monospace; font-size: 14px; width: 120px;">
                                                    <p style="margin: 10px 0 0 0; color: #666; font-size: 12px;">MenÃ¼, butonlar, vurgular</p>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Success Color -->
                                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                            <label style="display: block; font-weight: bold; margin-bottom: 15px;">BaÅarÄ± Rengi (Success)</label>
                                            <div style="display: flex; align-items: center; gap: 15px;">
                                                <input type="color" id="color-success" value="#48bb78" style="width: 80px; height: 80px; border: none; border-radius: 10px; cursor: pointer;">
                                                <div>
                                                    <input type="text" id="color-success-hex" value="#48bb78" readonly style="padding: 10px; border: 2px solid #ddd; border-radius: 5px; font-family: monospace; font-size: 14px; width: 120px;">
                                                    <p style="margin: 10px 0 0 0; color: #666; font-size: 12px;">Onay butonlarÄ±, baÅarÄ±</p>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Danger Color -->
                                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                            <label style="display: block; font-weight: bold; margin-bottom: 15px;">Tehlike Rengi (Danger)</label>
                                            <div style="display: flex; align-items: center; gap: 15px;">
                                                <input type="color" id="color-danger" value="#f56565" style="width: 80px; height: 80px; border: none; border-radius: 10px; cursor: pointer;">
                                                <div>
                                                    <input type="text" id="color-danger-hex" value="#f56565" readonly style="padding: 10px; border: 2px solid #ddd; border-radius: 5px; font-family: monospace; font-size: 14px; width: 120px;">
                                                    <p style="margin: 10px 0 0 0; color: #666; font-size: 12px;">Sil, iptal, uyarÄ±lar</p>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Warning Color -->
                                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                                            <label style="display: block; font-weight: bold; margin-bottom: 15px;">UyarÄ± Rengi (Warning)</label>
                                            <div style="display: flex; align-items: center; gap: 15px;">
                                                <input type="color" id="color-warning" value="#ffc107" style="width: 80px; height: 80px; border: none; border-radius: 10px; cursor: pointer;">
                                                <div>
                                                    <input type="text" id="color-warning-hex" value="#ffc107" readonly style="padding: 10px; border: 2px solid #ddd; border-radius: 5px; font-family: monospace; font-size: 14px; width: 120px;">
                                                    <p style="margin: 10px 0 0 0; color: #666; font-size: 12px;">UyarÄ±lar, dikkat</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Preset Color Palettes -->
                                    <div style="margin-top: 30px;">
                                        <h4 style="margin: 0 0 20px 0;">ð¨ Profesyonel Renk Paletleri</h4>
                                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px;">
                                            <!-- Ocean Blue -->
                                            <button type="button" onclick="applyColorPreset('oceanBlue')" class="theme-preset-btn" style="padding: 20px; border: 3px solid #2196F3; border-radius: 12px; background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%); color: white; cursor: pointer; font-weight: bold; transition: all 0.3s; box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);">
                                                <div style="font-size: 32px; margin-bottom: 8px;">ð</div>
                                                <div style="font-size: 16px; margin-bottom: 5px;">Ocean Blue</div>
                                                <div style="font-size: 11px; opacity: 0.9; font-weight: normal;">Profesyonel mavi tonlarÄ±</div>
                                            </button>

                                            <!-- Forest Green -->
                                            <button type="button" onclick="applyColorPreset('forestGreen')" class="theme-preset-btn" style="padding: 20px; border: 3px solid #4CAF50; border-radius: 12px; background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%); color: white; cursor: pointer; font-weight: bold; transition: all 0.3s; box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);">
                                                <div style="font-size: 32px; margin-bottom: 8px;">ð²</div>
                                                <div style="font-size: 16px; margin-bottom: 5px;">Forest Green</div>
                                                <div style="font-size: 11px; opacity: 0.9; font-weight: normal;">DoÄal ve sakin yeÅil</div>
                                            </button>

                                            <!-- Sunset Purple -->
                                            <button type="button" onclick="applyColorPreset('sunsetPurple')" class="theme-preset-btn" style="padding: 20px; border: 3px solid #9C27B0; border-radius: 12px; background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%); color: white; cursor: pointer; font-weight: bold; transition: all 0.3s; box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);">
                                                <div style="font-size: 32px; margin-bottom: 8px;">ð</div>
                                                <div style="font-size: 16px; margin-bottom: 5px;">Sunset Purple</div>
                                                <div style="font-size: 11px; opacity: 0.9; font-weight: normal;">Modern mor-pembe</div>
                                            </button>

                                            <!-- Dark Professional -->
                                            <button type="button" onclick="applyColorPreset('darkProfessional')" class="theme-preset-btn" style="padding: 20px; border: 3px solid #37474F; border-radius: 12px; background: linear-gradient(135deg, #37474F 0%, #263238 100%); color: white; cursor: pointer; font-weight: bold; transition: all 0.3s; box-shadow: 0 4px 12px rgba(55, 71, 79, 0.3);">
                                                <div style="font-size: 32px; margin-bottom: 8px;">ð</div>
                                                <div style="font-size: 16px; margin-bottom: 5px;">Dark Professional</div>
                                                <div style="font-size: 11px; opacity: 0.9; font-weight: normal;">Koyu profesyonel</div>
                                            </button>

                                            <!-- Default -->
                                            <button type="button" onclick="applyColorPreset('default')" class="theme-preset-btn" style="padding: 20px; border: 3px solid #667eea; border-radius: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; cursor: pointer; font-weight: bold; transition: all 0.3s; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);">
                                                <div style="font-size: 32px; margin-bottom: 8px;">â­</div>
                                                <div style="font-size: 16px; margin-bottom: 5px;">Default</div>
                                                <div style="font-size: 11px; opacity: 0.9; font-weight: normal;">VarsayÄ±lan tema</div>
                                            </button>

                                            <!-- Energetic -->
                                            <button type="button" onclick="applyColorPreset('energetic')" class="theme-preset-btn" style="padding: 20px; border: 3px solid #FF5722; border-radius: 12px; background: linear-gradient(135deg, #FF5722 0%, #E64A19 100%); color: white; cursor: pointer; font-weight: bold; transition: all 0.3s; box-shadow: 0 4px 12px rgba(255, 87, 34, 0.3);">
                                                <div style="font-size: 32px; margin-bottom: 8px;">â¡</div>
                                                <div style="font-size: 16px; margin-bottom: 5px;">Energetic</div>
                                                <div style="font-size: 11px; opacity: 0.9; font-weight: normal;">Enerjik kÄ±rmÄ±zÄ±-turuncu</div>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Reset Button -->
                                    <div style="margin-top: 30px; text-align: center;">
                                        <button type="button" onclick="resetThemeToDefault()" style="padding: 12px 30px; background: #6c757d; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
                                            ð VarsayÄ±lan Tema'ya DÃ¶n
                                        </button>
                                    </div>
                                </div>

                                <!-- Live Preview -->
                                <div style="background: white; padding: 25px; border-radius: 15px; margin-top: 30px; border: 2px solid #ddd;">
                                    <h4 style="margin: 0 0 15px 0;">ðï¸ CanlÄ± Ãnizleme</h4>
                                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                                        <button type="button" style="padding: 12px 25px; background: var(--color-primary, #667eea); color: white; border: none; border-radius: 8px; font-weight: bold;">Primary Button</button>
                                        <button type="button" style="padding: 12px 25px; background: var(--color-success, #48bb78); color: white; border: none; border-radius: 8px; font-weight: bold;">Success Button</button>
                                        <button type="button" style="padding: 12px 25px; background: var(--color-danger, #f56565); color: white; border: none; border-radius: 8px; font-weight: bold;">Danger Button</button>
                                        <button type="button" style="padding: 12px 25px; background: var(--color-warning, #ffc107); color: white; border: none; border-radius: 8px; font-weight: bold;">Warning Button</button>
                                    </div>
                                </div>
                            </div>

                            <div class="action-buttons" style="margin-top: 30px;">
                                <button type="submit" class="btn btn-success">ð¾ TÃ¼m AyarlarÄ± Kaydet</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Method Modal -->
    <div id="payment-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closePaymentModal()">&times;</span>
            <h2>Ãdeme Ä°Ålemi</h2>
            <div style="margin: 30px 0;">
                <h3 style="text-align: center; color: #667eea; font-size: 32px; margin-bottom: 20px;" id="payment-total">0.00 âº</h3>

                <!-- Change Calculation Section (only for Nakit) -->
                <div id="change-calculation" style="display: none; background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label style="font-size: 16px; font-weight: bold;">MÃ¼Återiden AlÄ±nan Tutar (âº)</label>
                        <input type="number" step="0.01" id="received-amount" placeholder="Ãrn: 100"
                               style="font-size: 24px; padding: 15px; text-align: center;"
                               oninput="calculateChange()">
                    </div>
                    <div id="change-display" style="display: none; margin-top: 15px; padding: 15px; background: #ffffcc; border: 2px solid #ffcc00; border-radius: 5px;">
                        <p style="font-size: 14px; margin-bottom: 5px; color: #666;">Para ÃstÃ¼:</p>
                        <p style="font-size: 28px; font-weight: bold; color: #28a745; margin: 0;" id="change-amount">0.00 âº</p>
                    </div>
                    <div id="insufficient-warning" style="display: none; margin-top: 15px; padding: 15px; background: #ffe6e6; border: 2px solid #ff4444; border-radius: 5px;">
                        <p style="font-size: 16px; font-weight: bold; color: #dc3545; margin: 0;">â ï¸ Yetersiz tutar!</p>
                    </div>
                </div>

                <!-- Payment Method Buttons -->
                <div id="payment-method-buttons">
                    <button class="btn btn-success" style="width: 100%; padding: 20px; margin: 10px 0; font-size: 18px;" onclick="showChangeCalculation()">
                        ðµ Nakit
                    </button>

                    <button class="btn btn-primary" style="width: 100%; padding: 20px; margin: 10px 0; font-size: 18px;" onclick="selectPaymentMethod('Kredi KartÄ±')">
                        ð³ Kredi KartÄ±
                    </button>

                    <button class="btn btn-secondary" style="width: 100%; padding: 20px; margin: 10px 0; font-size: 18px;" onclick="selectPaymentMethod('Havale')">
                        ð¦ Havale
                    </button>
                </div>

                <!-- Confirm Cash Payment Button (hidden initially) -->
                <div id="confirm-cash-payment" style="display: none;">
                    <button class="btn btn-success" style="width: 100%; padding: 20px; font-size: 18px;" onclick="confirmCashPayment()">
                        â Nakit Ãdemeyi Tamamla
                    </button>
                    <button class="btn btn-secondary" style="width: 100%; padding: 15px; margin-top: 10px; font-size: 16px;" onclick="backToPaymentMethods()">
                        â Geri
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit Product Modal -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeProductModal()">&times;</span>
            <h2 id="product-modal-title">Yeni ÃrÃ¼n Ekle</h2>
            <form id="product-form" onsubmit="saveProduct(event)">
                <input type="hidden" id="product-id">
                <div class="form-group">
                    <label>Barkod</label>
                    <input type="text" id="product-barcode" required>
                </div>
                <div class="form-group">
                    <label>ÃrÃ¼n AdÄ±</label>
                    <input type="text" id="product-name" required>
                </div>
                <div class="form-group">
                    <label>Fiyat (âº)</label>
                    <input type="text" inputmode="decimal" id="product-price" required
                           placeholder="Ãrn: 1.234,56"
                           oninput="this.value = this.value.replace(/[^0-9.,]/g, '')">
                    <small style="color: #666;">Binler iÃ§in nokta (.), ondalÄ±k iÃ§in virgÃ¼l (,) kullanÄ±n</small>
                </div>
                <div class="form-group">
                    <label>Stok</label>
                    <input type="text" inputmode="numeric" id="product-stock" required
                           pattern="[0-9]+"
                           placeholder="Ãrn: 100"
                           oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                </div>
                <div class="form-group">
                    <label>Kategori</label>
                    <input type="text" id="product-category">
                </div>
                <div class="form-group">
                    <label>KDV OranÄ± (%)</label>
                    <select id="product-vat-rate">
                        <option value="0">%0 KDV</option>
                        <option value="1">%1 KDV</option>
                        <option value="10">%10 KDV</option>
                        <option value="20" selected>%20 KDV</option>
                    </select>
                </div>
                <div class="action-buttons">
                    <button type="submit" class="btn btn-success">Kaydet</button>
                    <button type="button" class="btn btn-secondary" onclick="closeProductModal()">Ä°ptal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Select Customer Modal (for POS) -->
    <div id="select-customer-modal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <h2>MÃ¼Återi SeÃ§</h2>
            <p style="color: #666; margin-bottom: 15px;">Bu satÄ±Å iÃ§in mÃ¼Återi seÃ§in. BoÅ bÄ±rakÄ±rsanÄ±z misafir satÄ±Å olarak kaydedilir.</p>

            <div class="form-group">
                <input type="text" id="customer-search-modal" placeholder="MÃ¼Återi ara..."
                    oninput="searchCustomersInModal()" style="width: 100%;">
            </div>

            <div id="customer-list-modal" style="max-height: 400px; overflow-y: auto; border: 1px solid #ddd; border-radius: 5px; padding: 10px;">
                <!-- MÃ¼Återiler dinamik olarak yÃ¼klenecek -->
            </div>

            <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button class="btn btn-secondary" onclick="closeModal('select-customer-modal')">Ä°ptal</button>
                <button class="btn btn-primary" onclick="showAddCustomerModal(); closeModal('select-customer-modal')">
                    + Yeni MÃ¼Återi Ekle
                </button>
            </div>
        </div>
    </div>

    <!-- Add/Edit Customer Modal -->
    <div id="customer-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeCustomerModal()">&times;</span>
            <h2 id="customer-modal-title">Yeni MÃ¼Återi Ekle</h2>
            <form id="customer-form" onsubmit="saveCustomer(event)">
                <input type="hidden" id="customer-id">
                <div class="form-group">
                    <label>MÃ¼Återi AdÄ± *</label>
                    <input type="text" id="customer-name" required>
                </div>
                <div class="form-group">
                    <label>Telefon</label>
                    <input type="tel" id="customer-phone">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="customer-email">
                </div>
                <div class="form-group">
                    <label>Adres</label>
                    <textarea id="customer-address" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>DoÄum Tarihi</label>
                    <input type="date" id="customer-birth-date">
                    <small style="color: #666; display: block; margin-top: 5px;">DoÄum gÃ¼nÃ¼ otomasyonu iÃ§in kullanÄ±lÄ±r</small>
                </div>
                <div class="action-buttons">
                    <button type="submit" class="btn btn-success">ð¾ Kaydet</button>
                    <button type="button" class="btn btn-secondary" onclick="closeCustomerModal()">â Ä°ptal</button>
                </div>
            </form>
        </div>
    </div>
    <!-- Stock Update Modal -->
    <div id="stock-modal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <span class="close-modal" onclick="closeStockModal()">&times;</span>
            <h2>Stok GÃ¼ncelle</h2>
            <h3 id="stock-product-name" style="color: #667eea; margin: 20px 0;"></h3>
            <p style="font-size: 16px;">Mevcut Stok: <strong id="stock-current" style="color: #28a745; font-size: 20px;">0</strong></p>

            <!-- Large +/- Buttons with Number Input -->
            <div style="margin: 30px 0;">
                <label style="display: block; margin-bottom: 10px; font-weight: bold; font-size: 16px;">Eklenecek/ÃÄ±karÄ±lacak Miktar</label>
                <div style="display: flex; align-items: center; gap: 15px; justify-content: center;">
                    <button onclick="adjustStockAmount(-1)" style="width: 60px; height: 60px; font-size: 32px; font-weight: bold; border: none; background: #dc3545; color: white; border-radius: 10px; cursor: pointer; box-shadow: 0 3px 6px rgba(0,0,0,0.2);">â</button>

                    <input type="number" id="stock-quantity" placeholder="0" value="0" style="width: 150px; font-size: 28px; padding: 15px; text-align: center; border: 3px solid #667eea; border-radius: 10px; font-weight: bold;">

                    <button onclick="adjustStockAmount(1)" style="width: 60px; height: 60px; font-size: 32px; font-weight: bold; border: none; background: #28a745; color: white; border-radius: 10px; cursor: pointer; box-shadow: 0 3px 6px rgba(0,0,0,0.2);">+</button>
                </div>
                <small style="color: #666; display: block; text-align: center; margin-top: 10px;">Pozitif deÄer ekler, negatif deÄer Ã§Ä±karÄ±r</small>
            </div>

            <!-- Quick Amount Buttons Grid -->
            <div style="margin: 30px 0;">
                <label style="display: block; margin-bottom: 15px; font-weight: bold; font-size: 16px; text-align: center;">HÄ±zlÄ± Miktar SeÃ§imi</label>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; max-width: 500px; margin: 0 auto;">
                    <!-- Negative amounts -->
                    <button onclick="adjustStockAmount(-50)" style="padding: 12px; font-size: 16px; font-weight: bold; border: 2px solid #dc3545; background: white; color: #dc3545; border-radius: 8px; cursor: pointer; transition: all 0.2s;">-50</button>
                    <button onclick="adjustStockAmount(-25)" style="padding: 12px; font-size: 16px; font-weight: bold; border: 2px solid #dc3545; background: white; color: #dc3545; border-radius: 8px; cursor: pointer; transition: all 0.2s;">-25</button>
                    <button onclick="adjustStockAmount(-10)" style="padding: 12px; font-size: 16px; font-weight: bold; border: 2px solid #dc3545; background: white; color: #dc3545; border-radius: 8px; cursor: pointer; transition: all 0.2s;">-10</button>
                    <button onclick="adjustStockAmount(-5)" style="padding: 12px; font-size: 16px; font-weight: bold; border: 2px solid #dc3545; background: white; color: #dc3545; border-radius: 8px; cursor: pointer; transition: all 0.2s;">-5</button>

                    <!-- Positive amounts -->
                    <button onclick="adjustStockAmount(5)" style="padding: 12px; font-size: 16px; font-weight: bold; border: 2px solid #28a745; background: white; color: #28a745; border-radius: 8px; cursor: pointer; transition: all 0.2s;">+5</button>
                    <button onclick="adjustStockAmount(10)" style="padding: 12px; font-size: 16px; font-weight: bold; border: 2px solid #28a745; background: white; color: #28a745; border-radius: 8px; cursor: pointer; transition: all 0.2s;">+10</button>
                    <button onclick="adjustStockAmount(25)" style="padding: 12px; font-size: 16px; font-weight: bold; border: 2px solid #28a745; background: white; color: #28a745; border-radius: 8px; cursor: pointer; transition: all 0.2s;">+25</button>
                    <button onclick="adjustStockAmount(50)" style="padding: 12px; font-size: 16px; font-weight: bold; border: 2px solid #28a745; background: white; color: #28a745; border-radius: 8px; cursor: pointer; transition: all 0.2s;">+50</button>
                </div>
            </div>

            <!-- Set to Zero Button -->
            <div style="text-align: center; margin: 20px 0;">
                <button onclick="setStockAmount(0)" style="padding: 10px 30px; font-size: 14px; border: 2px solid #ffc107; background: white; color: #ffc107; border-radius: 8px; cursor: pointer; font-weight: bold;">SÄ±fÄ±rla (0)</button>
            </div>

            <div class="action-buttons" style="margin-top: 30px;">
                <button class="btn btn-success" onclick="confirmStockUpdate()">â GÃ¼ncelle</button>
                <button class="btn btn-secondary" onclick="closeStockModal()">â Ä°ptal</button>
            </div>
        </div>
    </div>

    <!-- Custom Confirmation Dialog -->
    <div id="confirm-modal" class="modal">
        <div class="modal-content" style="max-width: 450px;">
            <h2 id="confirm-title" style="margin-bottom: 15px; color: #333;">Emin misiniz?</h2>
            <p id="confirm-message" style="font-size: 15px; line-height: 1.6; color: #666; white-space: pre-line;">Bu iÅlemi yapmak istediÄinizden emin misiniz?</p>
            <div style="display: flex; gap: 10px; margin-top: 25px;">
                <button id="confirm-yes" class="btn btn-danger" style="flex: 1; padding: 12px;">â Tamam</button>
                <button id="confirm-no" class="btn btn-secondary" style="flex: 1; padding: 12px;">â Ä°ptal</button>
            </div>
        </div>
    </div>

    <!-- CRM Modals -->
    <!-- Add/Edit Note Modal -->
    <div class="modal" id="note-modal">
        <div class="modal-content">
            <h2 id="note-modal-title">Yeni Not Ekle</h2>
            <form id="note-form" onsubmit="saveNote(event)">
                <div class="form-group">
                    <label>Not</label>
                    <textarea id="note-text" required rows="4" placeholder="MÃ¼Återi hakkÄ±nda notlar..."></textarea>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button type="submit" class="btn btn-primary">ð¾ Kaydet</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('note-modal')">Ä°ptal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Reminder Modal -->
    <div class="modal" id="reminder-modal">
        <div class="modal-content">
            <h2>Yeni HatÄ±rlatÄ±cÄ± Ekle</h2>
            <form id="reminder-form" onsubmit="saveReminder(event)">
                <div class="form-group">
                    <label>BaÅlÄ±k</label>
                    <input type="text" id="reminder-title" required placeholder="Ã¶rn: DoÄum gÃ¼nÃ¼">
                </div>
                <div class="form-group">
                    <label>Tarih</label>
                    <input type="date" id="reminder-date" required>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button type="submit" class="btn btn-primary">ð¾ Kaydet</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('reminder-modal')">Ä°ptal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Template Modal -->
    <div class="modal" id="template-modal">
        <div class="modal-content" style="max-width: 700px;">
            <h2 id="template-modal-title">Yeni Åablon Ekle</h2>
            <form id="template-form" onsubmit="saveTemplate(event)">
                <input type="hidden" id="template-id">
                <div class="form-group">
                    <label>Åablon AdÄ±</label>
                    <input type="text" id="template-name" required placeholder="Ã¶rn: DoÄum GÃ¼nÃ¼ MesajÄ±">
                </div>
                <div class="form-group">
                    <label>Kategori</label>
                    <select id="template-category" required>
                        <option value="birthday">ð DoÄum GÃ¼nÃ¼</option>
                        <option value="discount">ð Ä°ndirim/Kampanya</option>
                        <option value="welcome">ð HoÅ Geldiniz</option>
                        <option value="reminder">â ï¸ HatÄ±rlatma</option>
                        <option value="thankyou">ð TeÅekkÃ¼r</option>
                        <option value="announcement">ð¢ Duyuru</option>
                        <option value="custom">âï¸ Ãzel</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Mesaj Tipi</label>
                    <select id="template-type" required>
                        <option value="both">WhatsApp ve Email</option>
                        <option value="whatsapp">Sadece WhatsApp</option>
                        <option value="email">Sadece Email</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Mesaj Ä°Ã§eriÄi</label>
                    <textarea id="template-content" required rows="6" placeholder="DeÄiÅkenler: {musteri_adi}, {telefon}, {email}, {toplam_harcama}, {son_alisveris}, {puan}, {indirim_kodu}, {magaza_adi}, {tarih}"></textarea>
                    <small style="color: #666;">MesajÄ±nÄ±zda yukarÄ±daki deÄiÅkenleri kullanabilirsiniz.</small>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="template-active" checked>
                        Aktif
                    </label>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button type="submit" class="btn btn-primary">ð¾ Kaydet</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('template-modal')">Ä°ptal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Send Email Modal -->
    <div class="modal" id="send-email-modal">
        <div class="modal-content" style="max-width: 700px;">
            <h2>ð§ Email GÃ¶nder</h2>
            <form id="send-email-form" onsubmit="sendEmail(event)">
                <div class="form-group">
                    <label>Åablon SeÃ§ (Opsiyonel)</label>
                    <select id="email-template-select" onchange="loadEmailTemplate()">
                        <option value="">Ãzel mesaj yaz...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Konu</label>
                    <input type="text" id="email-subject" required>
                </div>
                <div class="form-group">
                    <label>Mesaj</label>
                    <textarea id="email-content" required rows="8"></textarea>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button type="submit" class="btn btn-primary">ð§ GÃ¶nder</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('send-email-modal')">Ä°ptal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Bulk Message Modal -->
    <div class="modal" id="bulk-message-modal">
        <div class="modal-content" style="max-width: 800px;">
            <h2>ð¤ Toplu Mesaj GÃ¶nder</h2>
            <form id="bulk-message-form" onsubmit="sendBulkMessage(event)">
                <div class="form-group">
                    <label>MÃ¼Återi SeÃ§imi</label>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <label><input type="radio" name="bulk-target" value="all" checked> TÃ¼m mÃ¼Återiler</label>
                        <label><input type="radio" name="bulk-target" value="vip"> Sadece VIP mÃ¼Återiler</label>
                        <label><input type="radio" name="bulk-target" value="regular"> Sadece DÃ¼zenli mÃ¼Återiler</label>
                        <label><input type="radio" name="bulk-target" value="risk"> Sadece Risk altÄ±ndakiler</label>
                        <label><input type="radio" name="bulk-target" value="new"> Sadece Yeni mÃ¼Återiler</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Mesaj Åablonu</label>
                    <select id="bulk-template-select" required onchange="loadBulkTemplate()">
                        <option value="">Åablon seÃ§in...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Mesaj Tipi</label>
                    <select id="bulk-message-type" required>
                        <option value="both">WhatsApp ve Email</option>
                        <option value="whatsapp">Sadece WhatsApp</option>
                        <option value="email">Sadece Email</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Mesaj Ãnizleme</label>
                    <div id="bulk-message-preview" style="padding: 15px; background: #f8f9fa; border: 1px solid #ddd; border-radius: 5px; white-space: pre-wrap;">
                        Åablon seÃ§ilmedi...
                    </div>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button type="button" class="btn btn-secondary" onclick="previewBulkMessage()">ðï¸ Ãnizle</button>
                    <button type="submit" class="btn btn-primary">ð¤ GÃ¶nder</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal('bulk-message-modal')">Ä°ptal</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://unpkg.com/@zxing/library@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- ========== TIER 1: Core Utilities & Helpers ========== -->
    <script src="price-formatter.js"></script>
    <script src="custom-confirm.js"></script>
    <script src="modal-focus-fix.js"></script>
    <script src="modal-overlay-fix.js"></script>

    <!-- ========== TIER 2: Main Application Core ========== -->
    <script src="app.js"></script>

    <!-- ========== TIER 3: System Components ========== -->
    <script src="vat-calculator.js"></script>
    <script src="receipt-printer.js"></script>
    <script src="payment-system.js"></script>
    <script src="keyboard-shortcuts.js"></script>
    <script src="quick-search.js"></script>
    <script src="theme-system.js"></script>

    <!-- ========== TIER 4: Feature Modules ========== -->
    <script src="settings-tabs.js"></script>
    <script src="customers-functions.js"></script>
    <script src="stock-update-fix.js"></script>
    <script src="stock-modal-new.js"></script>
    <script src="advanced-reports.js"></script>

    <!-- ========== TIER 5: CRM System (depends on customers-functions) ========== -->
    <script src="message-templates.js"></script>
    <script src="automation-system.js"></script>
    <script src="message-sender.js"></script>
    <script src="crm-system.js"></script>
    <script src="pos-customer-selection.js"></script>

    <!-- ========== TIER 6: Enhancements & Optimizations (must be last) ========== -->
    <script src="table-sorting.js"></script>
    <script src="optimizations.js"></script>
</body>
</html>
